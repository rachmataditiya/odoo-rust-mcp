# Kubernetes Secret for Odoo Credentials
# IMPORTANT: Replace placeholder values with your actual credentials
# For production, use external secret management (Vault, AWS Secrets Manager, etc.)
#
# Apply: kubectl apply -f secret.yaml -n odoo-mcp
#
# To create secret from command line:
# kubectl create secret generic odoo-mcp-secrets -n odoo-mcp \
#   --from-literal=ODOO_API_KEY=your-api-key \
#   --from-literal=MCP_AUTH_TOKEN=your-auth-token
apiVersion: v1
kind: Secret
metadata:
  name: odoo-mcp-secrets
  namespace: odoo-mcp
  labels:
    app.kubernetes.io/name: odoo-rust-mcp
    app.kubernetes.io/component: secrets
type: Opaque
stringData:
  # =========================================================================
  # Multi-Instance Configuration (default - recommended)
  # =========================================================================
  # Uses instances.json from ConfigMap (mounted at /config/instances.json)
  # Configure credentials directly in the ConfigMap instances.json
  # For sensitive credentials, use external secret management (Vault, etc.)
  ODOO_INSTANCES_JSON: "/config/instances.json"
  
  # =========================================================================
  # Single Instance Authentication (fallback - uncomment if not using multi-instance)
  # =========================================================================
  # # For Odoo 19+ with API Key
  # ODOO_API_KEY: "your-odoo-api-key-here"
  # 
  # # For Odoo < 19 with Username/Password
  # ODOO_USERNAME: "admin"
  # ODOO_PASSWORD: "your-password-here"
  
  # =========================================================================
  # MCP HTTP Authentication
  # =========================================================================
  # STRONGLY RECOMMENDED for production!
  # Generate: openssl rand -hex 32
  MCP_AUTH_TOKEN: "your-secure-random-token-here"

---
# Example: External Secrets Operator integration
# Uncomment if using external secret management
#
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: odoo-mcp-external-secrets
#   namespace: odoo-mcp
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: vault-backend
#     kind: ClusterSecretStore
#   target:
#     name: odoo-mcp-secrets
#   data:
#     - secretKey: ODOO_API_KEY
#       remoteRef:
#         key: secret/data/odoo-mcp
#         property: api_key
#     - secretKey: MCP_AUTH_TOKEN
#       remoteRef:
#         key: secret/data/odoo-mcp
#         property: auth_token
